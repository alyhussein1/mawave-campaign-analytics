version: 2

models:
  - name: bl_monthly_campaign_cohorts
    description: "Monthly campaign cohort metrics per client, including performance, profitability, and month-over-month growth."
    tests:
      - dbt_expectations.expect_compound_columns_to_be_unique:
          column_list:
            - client_id
            - month
    columns:
      - name: client_id
        description: "Unique identifier for the client."
        tests:
          - not_null
      - name: client_name
        description: "Name of the client."
      - name: primary_industry
        description: "Primary industry of the client."
      - name: month
        description: "First day of the month for this cohort record."
      - name: year
        description: "Year of the month for this record."
      - name: month_number
        description: "Month number (1-12) of this record."
      - name: num_campaigns
        description: "Number of campaigns running for the client in this month."
      - name: total_spend
        description: "Total ad spend for the client in this month."
      - name: total_revenue
        description: "Total revenue generated by campaigns for the client in this month."
      - name: total_impressions
        description: "Total ad impressions across all campaigns for the client in this month."
      - name: total_clicks
        description: "Total clicks across all campaigns for the client in this month."
      - name: total_conversions
        description: "Total conversions across all campaigns for the client in this month."
      - name: profit
        description: "Total revenue minus total spend for the month."
      - name: profit_margin_pct
        description: "Profit margin percentage: (profit / total spend) * 100."
      - name: spend_growth_pct
        description: "Month-over-month percentage change in total spend."
      - name: revenue_growth_pct
        description: "Month-over-month percentage change in total revenue."
      - name: conversion_growth_pct
        description: "Month-over-month percentage change in total conversions."
      - name: profitability_status
        description: "Profitability classification for the month. Values: Profitable, Break-even, Loss-making."
